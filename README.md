## 🔧 Makefileの使い方（Quick Start）


| コマンド                                | 説明                                                         |
|----------------------------------------|--------------------------------------------------------------|
| `make`                                 | 実行ファイル **`longest_path`** をビルド                     |
| `make run FILE=tests/case01_simple.txt`| 任意のテストケースで実行                                     |
| `make test-all`                        | `tests/` 内のすべてのケースを一括実行                        |
| `make clean`                           | 実行ファイルや一時ファイルを削除                              |

---

## 仕様
標準入力で与えられた鉄道路線 (無向グラフ) から同じ駅を 2 回通らない最長ルートを求めて駅 ID を列挙する

行頭・行末の空白はむし

distance は 0 以上の実数値

無向扱い：片方向を読んだら両方向エッジとして登録

### 許容ルート

| 区分           | 説明                                                         |
|----------------|--------------------------------------------------------------|
| **開路**       | 始点 ≠ 終点                                                  |
| **単純サイクル** | 始点 ＝ 終点       |

### 探索アルゴリズム

1. **全頂点起点 DFS**  
3. 訪問済みノードは再訪しない  
4. root へは最大 **1 回だけ** 戻り、戻った時点でサイクル長を評価

### 経路選択ルール
1. **総距離が最大** の経路  
2. 同距離が複数ある場合は **駅 ID 配列が辞書順で最小** になる向き
### 出力

- 選ばれた経路の駅 ID を **1 行ずつ標準出力**  
- サイクルの場合は始点 (=終点) が **先頭と末尾** に 1 回ずつ現れる

### エラー処理（`stderr` に出力し処理継続）

| 条件            | メッセージ例                                                     |
|-----------------|------------------------------------------------------------------|
| フォーマット不正 | `不正な入力形式: 1-2-3.5`                                        |
| 距離が負値       | `無効な距離（負の値）: -3.5 → 入力行: 1, 2, -3.5`                 |
| 数値変換失敗     | `数値変換エラー: invalid_argument → 入力行: foo, bar, 1.0`         |
| 有効行ゼロ       | `入力なし`（一度だけ出力し終了コード 1）                           |

### 終了コード

| 値 | 意味                                   |
|----|----------------------------------------|
| `0` | 正常終了                               |
| `1` | 有効エッジ 0 本、または致命的エラー     |

---

## どのように実装したか。
**小さなステップに分けて作る**  
機能を小さなステップに分けて進めました。一度にすべてを作るのではなく、各ステップで必ず動作確認を行い、バグの原因を特定しやすくすることで、安定して開発を進めることができました。
   - まず入力のパース＆バリデーションを書いて、正しく読み飛ばせるかチェック。  
   - 次にグラフ構築、その上で DFS 部分を実装して動作確認。  
   - 最後に最長距離の更新ロジックと向きの一意化（辞書順比較）を追加。

**Makefile で自動化**  
   - `make run FILE=...` で単発テストをサクッと実行  
   - `make test-all` で `tests/` 内の全ケースを一括検証  
   - `make clean` でビルド成果物を一発クリーン  
   - テスト自動化により、改修のたびに手動確認が不要になり、品質を維持
   - 開発効率の向上　make → make test-all のワンコマンドでビルドからテストまで完了し、何度も手動でコマンドを打つ手間を省けます。」

. **テストケース設計の工夫**  
   - 公式のサンプルがなかったため、自分で「誤フォーマット」「負値」「空行」「閉路」「分岐」など多彩なパターンを想定  
   - 異常系から大規模系まで自動テストに組み込み、安定性を担保  
---
ありがとうございました（>o<）
